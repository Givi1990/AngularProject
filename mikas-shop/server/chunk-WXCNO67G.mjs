import './polyfills.server.mjs';
import{a as J,b as H}from"./chunk-O5I7URLR.mjs";import{a as G}from"./chunk-GYQGQDXS.mjs";import{q,t as U}from"./chunk-YNXGCIQP.mjs";import{$ as F,A as k,Aa as B,Ba as N,E as f,F as _,N as T,S as V,U as o,V as P,Wa as j,Xa as D,Ya as L,Za as $,_ as E,aa as v,ca as m,d as b,ea as a,f as I,fa as s,g as M,ga as x,ha as C,ia as u,ja as d,n as O,qa as g,ra as p,s as S,sb as z,ub as R,z as A}from"./chunk-JUVFFZCQ.mjs";import{a as y,b as w}from"./chunk-VVCT4QZE.mjs";function W(r,c){if(r&1){let n=C();a(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"button",14),u("click",function(e){let i=f(n).$implicit,l=d();return _(l.prevImageMetode(i,e))}),x(5,"span",15),s(),x(6,"img",16),a(7,"button",17),u("click",function(e){let i=f(n).$implicit,l=d();return _(l.nextImageMetode(i,e))}),x(8,"span",18),s()()(),a(9,"div",19)(10,"div",20)(11,"h5",21),u("click",function(){let e=f(n).$implicit,i=d();return _(i.navigateToDetails(e))}),g(12),s(),a(13,"div",22)(14,"div",23),x(15,"i",24)(16,"i",24)(17,"i",24)(18,"i",24),s()(),a(19,"div",25)(20,"span"),g(21),s()(),a(22,"div",25)(23,"span"),g(24),s(),x(25,"span",26),a(26,"span"),g(27),s(),x(28,"span",26),a(29,"span"),g(30),x(31,"br"),s()(),a(32,"p",27),g(33),s()(),a(34,"div",28)(35,"div",29)(36,"h4",30),g(37),B(38,"currency"),s()(),a(39,"h6",31),g(40,"Free shipping"),s(),a(41,"div",32)(42,"button",33),u("click",function(){let e=f(n).$implicit,i=d();return _(i.navigateToDetails(e))}),g(43,"Details"),s(),a(44,"button",34),u("click",function(){let e=f(n).$implicit,i=d();return _(i.checkAutorithation(e))}),g(45,"Add to Cart"),s()()()()()()}if(r&2){let n=c.$implicit;o(6),m("src",n.images[n.imageIndex],V),o(6),p(n.title),o(9),p(n.child_category),o(3),p(n.category),o(3),p(n.size),o(3),p(n.color),o(3),p(n.description),o(4),p(N(38,8,n.price,"\u20BE "))}}function X(r,c){if(r&1){let n=C();a(0,"button",35),u("click",function(){f(n);let e=d();return _(e.changePage(1))}),g(1),s()}r&2&&(o(),p(1))}function Y(r,c){r&1&&(a(0,"span"),g(1,"..."),s())}function Z(r,c){if(r&1){let n=C();a(0,"button",36),u("click",function(){f(n);let e=d();return _(e.changePage(e.currentPage-1))}),g(1),s()}if(r&2){let n=d();m("disabled",n.currentPage===1),o(),p(n.currentPage-1)}}function tt(r,c){if(r&1){let n=C();a(0,"button",36),u("click",function(){f(n);let e=d();return _(e.changePage(e.currentPage+1))}),g(1),s()}if(r&2){let n=d();m("disabled",n.currentPage===n.totalPages),o(),p(n.currentPage+1)}}function et(r,c){r&1&&(a(0,"span"),g(1,"..."),s())}function it(r,c){if(r&1){let n=C();a(0,"button",35),u("click",function(){f(n);let e=d();return _(e.changePage(e.totalPages))}),g(1),s()}if(r&2){let n=d();o(),p(n.totalPages)}}var K=(()=>{let c=class c extends J{constructor(t,e,i,l,h){super(l),this.http=t,this.shellService=e,this.router=i,this.platformId=h,this.productsArray=[],this.searchingValue="",this.originalProductsArray=[],this.filteredProducts=[],this.cartArray=[],this.imageIndices=Array(this.productsArray.length).fill(0),this.currentPage=1,this.itemsPerPage=4,this.containerRef=l}ngOnInit(){this.getProductsMethod(),this.getSearchingValue(),this.getCategory(),this.getBrand(),this.selectFilterMetod(),this.getApi(),this.updateFilterOnDeselect()}getApi(){this.API=this.http.getAPI()}getProductsMethod(){this.http.getAPIProducts().pipe(I(t=>t)).subscribe(t=>{this.originalProductsArray=t.map(e=>w(y({},e),{imageIndex:0})),this.productsArray=[...this.originalProductsArray],this.totalPages=Math.ceil(this.productsArray.length/this.itemsPerPage),this.totalPagesArray=Array.from({length:this.totalPages},(e,i)=>i+1)})}changePage(t){this.currentPage=t}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return Math.min(this.startIndex+this.itemsPerPage-1,this.productsArray.length-1)}get currentPageProducts(){let t=(this.currentPage-1)*this.itemsPerPage,e=Math.min(t+this.itemsPerPage-1,this.productsArray.length-1);return this.productsArray.slice(t,e+1)}getSearchingValue(){this.shellService.getValue().subscribe(t=>{this.searchingValue=t,this.filterProducts()})}updatePagination(){this.totalPages=Math.ceil(this.productsArray.length/this.itemsPerPage),this.totalPagesArray=Array.from({length:this.totalPages},(t,e)=>e+1)}filterProducts(){this.searchingValue.trim().length>0?this.productsArray=this.originalProductsArray.filter(t=>Object.values(t).some(e=>typeof e=="string"?e.toLowerCase().includes(this.searchingValue.toLowerCase()):!1)):this.productsArray=[...this.originalProductsArray],this.currentPage=1,this.updatePagination()}getCategory(){this.categories$=this.shellService.getSelectedCategories(),this.categories$.subscribe(t=>{})}getBrand(){this.brands$=this.shellService.getSelectedBrands(),this.brands$.subscribe(t=>{})}updateFilterOnDeselect(){this.shellService.getSelectedCategories().subscribe(t=>{this.selectFilterMetod()}),this.shellService.getSelectedBrands().subscribe(t=>{this.selectFilterMetod()})}selectFilterMetod(){M([this.shellService.getSelectedCategories(),this.shellService.getSelectedBrands()]).pipe(O(([t,e])=>{if(t.length===0&&e.length===0)return b(this.originalProductsArray);{let i=this.productsArray.filter(l=>(t.length===0||t.includes(l.category))&&(e.length===0||e.some(h=>l.child_category.includes(h))));return b(i)}})).subscribe(t=>{this.productsArray=t,this.currentPage=1,this.updatePagination()})}nextImageMetode(t,e){e.stopPropagation();let i=t.images[t.imageIndex],l=e.target.closest(".image-container")?.querySelector(".card-img-top"),h=t.images.length;setTimeout(()=>{t.imageIndex++,t.imageIndex>=h&&(t.imageIndex=0)},801),l&&(l.classList.add("move-left"),setTimeout(()=>{l.classList.remove("move-left"),l.src=this.API+i},800))}prevImageMetode(t,e){e.stopPropagation();let i=t.images.length;setTimeout(()=>{t.imageIndex--,t.imageIndex<0&&(t.imageIndex=i-1)},801);let l=t.images[t.imageIndex],h=e.target.closest(".image-container")?.querySelector(".card-img-top");h&&(h.classList.add("move-right"),setTimeout(()=>{h.src=this.API+l,h.classList.remove("move-right")},800))}navigateToDetails(t){this.router.navigate(["./shell/details"],{queryParams:{id:t.id,title:t.title}})}checkAutorithation(t){this.authToken=localStorage.getItem("token"),console.log(this.authToken),this.authToken!==null?this.updateCart(t):this.openModal(H)}updateCart(t){let e=localStorage.getItem("cartArray");e?(this.cartArray=JSON.parse(e),this.cartArray.push(t),this.shellService.addToCart(this.cartArray),localStorage.setItem("cartArray",JSON.stringify(this.cartArray))):(this.cartArray.push(t),localStorage.setItem("cartArray",JSON.stringify(this.cartArray)),this.shellService.addToCart(this.cartArray))}};c.\u0275fac=function(e){return new(e||c)(P(U),P(G),P(z),P(E),P(T))},c.\u0275cmp=A({type:c,selectors:[["app-catalogue"]],features:[F],decls:15,vars:10,consts:[[1,"d-flex","justify-content-center"],["class","col-md-12",4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagButton",3,"click","disabled"],[1,"bi","bi-arrow-bar-left"],["class","pagButtonNums",3,"click",4,"ngIf"],[4,"ngIf"],["class","pagButtonNums",3,"disabled","click",4,"ngIf"],[1,"pagButtonNums","active"],[1,"bi","bi-arrow-bar-right"],[1,"col-md-12"],[1,"row","p-2","rounded","flexing"],[1,"col-md-4","mt-2","align-items-center","imageDiv"],[1,"image-container",2,"margin-left","1.5rem"],[1,"prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],["alt","no img found",1,"card-img-top",3,"src"],[1,"next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"col-md-7","textInCard"],[1,"col-md-5","mt-1","deckClass"],[1,"productName",3,"click"],[1,"d-flex","flex-row"],[1,"ratings","mr-2"],[1,"fa","fa-star"],[1,"mt-1","mb-1","spec-1"],[1,"dot"],[1,"text-justify","para","mb-0"],[1,"align-items-center","align-content-top","col-md-3","priceIncart"],[1,"d-flex","flex-row","align-items"],[1,"mr-1"],[1,"text-success"],[1,"d-flex","flex-column","mt-4"],[1,"btn","btn-primary","btn-sm",2,"max-width","300px",3,"click"],[1,"btn","btn-outline-primary","btn-sm","mt-2",2,"max-width","300px",3,"click"],[1,"pagButtonNums",3,"click"],[1,"pagButtonNums",3,"click","disabled"]],template:function(e,i){e&1&&(a(0,"div",0),v(1,W,46,11,"div",1),a(2,"div",2)(3,"button",3),u("click",function(){return i.changePage(i.currentPage-1)}),x(4,"i",4),s(),v(5,X,2,1,"button",5)(6,Y,2,0,"span",6)(7,Z,2,2,"button",7),a(8,"button",8),g(9),s(),v(10,tt,2,2,"button",7)(11,et,2,0,"span",6)(12,it,2,1,"button",5),a(13,"button",3),u("click",function(){return i.changePage(i.currentPage+1)}),x(14,"i",9),s()()()),e&2&&(o(),m("ngForOf",i.currentPageProducts),o(2),m("disabled",i.currentPage===1),o(2),m("ngIf",i.totalPages>0&&i.currentPage!==1),o(),m("ngIf",i.currentPage>3&&i.totalPages>3),o(),m("ngIf",i.currentPage>1&&i.currentPage!==2),o(2),p(i.currentPage),o(),m("ngIf",i.currentPage<i.totalPages&&i.currentPage!==i.totalPages-1),o(),m("ngIf",i.totalPages-i.currentPage>1&&i.totalPages>3),o(),m("ngIf",i.totalPages>1&&i.currentPage!==i.totalPages),o(),m("disabled",i.currentPage===i.totalPages))},dependencies:[j,D,L],styles:[".d-flex[_ngcontent-%COMP%]{flex-wrap:wrap;border:none}.col-md-12[_ngcontent-%COMP%]{min-width:360px;height:auto;box-shadow:2px 4px 7px -1px #0000005e;margin-top:1rem;background-color:#fffffe!important;display:flex;flex-direction:row;flex-wrap:wrap}.textInCard[_ngcontent-%COMP%]{max-width:60%;display:flex;flex-direction:row;justify-content:space-between;flex-wrap:wrap}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.card-img-top[_ngcontent-%COMP%]{width:300px;height:300px}.card-body[_ngcontent-%COMP%]{line-height:.4rem;min-width:none}.col-md-5[_ngcontent-%COMP%]{min-width:300px}.image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;min-width:300px}.productName[_ngcontent-%COMP%]:hover{text-decoration:underline}.next[_ngcontent-%COMP%]{border:none;background-color:#fff0;position:absolute;left:16rem;top:35%;font-size:2em;transition:transform .5s ease-in-out}.prev[_ngcontent-%COMP%]{border:none;background-color:#fff0;position:absolute;left:0rem;top:35%;font-size:2em;transition:opacity 1s ease-in-out;z-index:10}.next[_ngcontent-%COMP%]:hover, .prev[_ngcontent-%COMP%]:hover{color:#000}.card-img-top[_ngcontent-%COMP%]{transform:translate(0)}.card-img-top.move-left[_ngcontent-%COMP%]{transform:translate(-100%);transition:transform .8s ease-in-out}.card-img-top.move-right[_ngcontent-%COMP%]{transform:translate(100%);transition:transform .8s ease-in-out}.ratings[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:red}.strike-text[_ngcontent-%COMP%]{color:red;text-decoration:line-through}.product-image[_ngcontent-%COMP%]{width:100%}.dot[_ngcontent-%COMP%]{height:7px;width:7px;margin-left:6px;margin-right:6px;margin-top:3px;background-color:#00f;border-radius:50%;display:inline-block}.spec-1[_ngcontent-%COMP%]{color:#938787;font-size:15px}h5[_ngcontent-%COMP%]{font-weight:400}.para[_ngcontent-%COMP%]{font-size:16px}.pagination[_ngcontent-%COMP%]{width:350px;max-width:350px}.pagButton[_ngcontent-%COMP%], .pagButtonNums[_ngcontent-%COMP%]{border:none;background-color:#fff0;font-size:.8em;transition:opacity 1s ease-in-out;margin:.5rem auto}@media screen and (max-width: 1200px){.imageDiv[_ngcontent-%COMP%]{margin-left:-10px}}@media screen and (max-width: 992px){.imageDiv[_ngcontent-%COMP%]{margin-left:-30px;margin-top:2rem}.col-md-7[_ngcontent-%COMP%]{max-width:40%;margin-bottom:1rem}.col-md-5[_ngcontent-%COMP%]{max-width:265px}.priceIncart[_ngcontent-%COMP%]{min-width:265px}}@media screen and (max-width: 768px){.col-md-5[_ngcontent-%COMP%]{margin-left:1.5rem;max-width:300px}.flexing[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-left:-1rem;padding-left:0}.imageDiv[_ngcontent-%COMP%]{margin-left:-60px}.col-md-4[_ngcontent-%COMP%]{margin-bottom:4px;padding-left:1.5rem}.row[_ngcontent-%COMP%]{margin-left:-2rem;padding-left:0}.col-md-7[_ngcontent-%COMP%]{max-width:100%;justify-content:center}.priceIncart[_ngcontent-%COMP%]{min-width:365px}.align-items-center[_ngcontent-%COMP%]{padding-left:3rem;max-width:370px}.prev[_ngcontent-%COMP%]{top:45%;left:-2rem}.next[_ngcontent-%COMP%]{top:45%;left:15rem}}"]});let r=c;return r})();var nt=[{path:"catalogue",component:K}],Ct=(()=>{let c=class c{};c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=k({type:c}),c.\u0275inj=S({imports:[$,q,R.forChild(nt)]});let r=c;return r})();export{Ct as a};
