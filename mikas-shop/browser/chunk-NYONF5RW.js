import{Ba as j,C as P,Da as B,E as m,Ea as G,F as k,Fa as h,Ga as q,Ha as L,Ia as C,J as w,Ka as p,L as s,M as i,Ma as $,N as e,Na as R,O as a,Oa as H,P as v,Pa as Q,Q as g,Qa as J,R as y,Ra as K,Sa as W,Ta as X,Va as Y,Wa as Z,Xa as ee,Y as n,Z as u,f as T,h as A,m as _,n as U,na as O,oa as z,p as E,qa as D,t as V,u as M,x as b,y as S}from"./chunk-LQTGQXRW.js";import{a as I,b as F}from"./chunk-5FZOKLP6.js";function re(l,o){if(l&1&&(i(0,"option"),n(1),e()),l&2){let c=o.$implicit;m(),u(c)}}function oe(l,o){if(l&1){let c=v();i(0,"div",4)(1,"div",36)(2,"label"),n(3,"Category"),e(),a(4,"br"),i(5,"div",37)(6,"select",38),w(7,re,2,1,"option",35),e(),i(8,"button",39),g("click",function(){b(c);let r=y();return S(r.inputNewCategory())}),n(9,"Add New Category"),e()()()()}if(l&2){let c=y();m(7),s("ngForOf",c.categoryArray)}}function le(l,o){if(l&1){let c=v();i(0,"div",4)(1,"div",36)(2,"label"),n(3,"Category"),e(),a(4,"br"),i(5,"div",37),a(6,"input",40),i(7,"button",41),g("click",function(){b(c);let r=y();return S(r.inputNewCategory())}),n(8,"Return to Select"),e()()()()}}function ae(l,o){if(l&1&&(i(0,"option"),n(1),e()),l&2){let c=o.$implicit;m(),u(c)}}function ce(l,o){if(l&1){let c=v();i(0,"div",4)(1,"div",36)(2,"label"),n(3,"Category"),e(),a(4,"br"),i(5,"div",37)(6,"select",42),w(7,ae,2,1,"option",35),e(),i(8,"button",39),g("click",function(){b(c);let r=y();return S(r.inputNewCategory())}),n(9,"Add New Category"),e()()()()}if(l&2){let c=y();m(7),s("ngForOf",c.categoryArray)}}function de(l,o){if(l&1){let c=v();i(0,"div",4)(1,"div",36)(2,"label"),n(3,"Category"),e(),a(4,"br"),i(5,"div",37),a(6,"input",43),i(7,"button",41),g("click",function(){b(c);let r=y();return S(r.inputNewCategory())}),n(8,"Return to Select"),e()()()()}}function me(l,o){if(l&1&&a(0,"img",44),l&2){let c=o.$implicit;s("src",c,P)}}function pe(l,o){if(l&1){let c=v();i(0,"tr")(1,"td"),a(2,"img",45),e(),i(3,"td"),n(4),e(),i(5,"td"),n(6),e(),i(7,"td"),n(8),e(),i(9,"td"),n(10),e(),i(11,"td"),n(12),e(),i(13,"td"),n(14),e(),i(15,"td"),n(16),e(),i(17,"td"),n(18),e(),i(19,"td"),n(20),e(),i(21,"td"),n(22),e(),i(23,"td"),n(24),e(),i(25,"td")(26,"button",46),g("click",function(){let r=b(c).$implicit,d=y();return S(d.deleteProductMetode(r.id))}),n(27,"DELETE"),e()()()}if(l&2){let c=o.$implicit;m(2),s("src",c.images[0],P),m(2),u(c.title),m(2),u(c.description),m(2),u(c.product_style),m(2),u(c.barcode),m(2),u(c.category),m(2),u(c.color),m(2),u(c.size),m(2),u(c.child_category),m(2),u(c.price),m(2),u(c.stock),m(2),u(c.id)}}var te=(()=>{let o=class o{constructor(t,r){this.httpServise=t,this.cookieService=r,this.API="http://localhost:8000/",this.categoryArray=[],this.categoryBool=!0,this.productArray=[],this.imagesArray=[],this.imageIndices=Array(this.productArray.length).fill(0),this.nextButton$=T(document,"click")}ngOnInit(){this.initForm(),this.getSelectedData(),this.getProductMetode(),this.getProductTable()}ngAfterViewInit(){}nextImageMetode(t){let r=t.images.length;console.log(r),t.imageIndex++,r<=t.imageIndex&&(t.imageIndex=0)}initForm(){this.productSearchForm=new C({searchProduct:new p("")}),this.productForm=new C({title:new p("",h.required),description:new p("",h.required),price:new p("",h.required),stock:new p("",h.required),productStyle:new p(""),barcode:new p(""),sizes:new p("",h.required),color:new p("",h.required),category:new p("",h.required),child_category:new p("",h.required),image:new p("",h.required)}),this.changrProductForm=new C({id:new p(""),newtitle:new p(""),newdescription:new p(""),newprice:new p(""),newstock:new p(""),newproductStyle:new p(""),newbarcode:new p(""),newsize:new p(""),newcolor:new p(""),newcategory:new p(""),newchild_category:new p("",h.required),newimage:new p("")})}findProduct(){this.productId=this.changrProductForm.get("id")?.value;let t=this.productArray.find(r=>r.id==this.productId);t?(this.changeObj=t,console.log(this.changeObj),this.imageArray=t.images,this.changrProductForm.patchValue({newtitle:t.title,newdescription:t.description,newprice:t.price,newstock:t.stock,newproductStyle:t.productStyle,newbarcode:t.barcode,newsizes:t.sizes,newcolor:t.color,newcategory:t.category,newchild_category:t.newchild_category})):console.error("ID not found")}searchProduct(){this.productSearchForm.get("searchProduct")?.valueChanges.pipe(A(1500)).subscribe(t=>{console.log(t),t.trim().length>0?(this.produstTableArray=this.productArray.filter(r=>Object.values(r).some(d=>typeof d=="string"?d.toLowerCase().includes(t.toLowerCase()):typeof d=="number"?d.toString().includes(t.toLowerCase()):!1)),console.log(this.produstTableArray)):this.produstTableArray=[...this.productArray]})}getProductTable(){}changeProductMetode(){let t=new FormData;t.append("category",this.changrProductForm.get("newcategory")?.value),t.append("newchild_category",this.changrProductForm.get("newchild_category")?.value),t.append("title",this.changrProductForm.get("newtitle")?.value),t.append("description",this.changrProductForm.get("newdescription")?.value),t.append("product_style",this.changrProductForm.get("product_style")?.value),t.append("barcode",this.changrProductForm.get("newbarcode")?.value),t.append("price",this.changrProductForm.get("newprice")?.value),t.append("stock",this.changrProductForm.get("newstock")?.value),t.append("size",this.changrProductForm.get("newsize")?.value),t.append("color",this.changrProductForm.get("newcolor")?.value),t.append("newimages",this.imageArray),t.forEach((r,d)=>{}),localStorage.getItem("token")&&(this.authToken=localStorage.getItem("token")||"",this.csrfToken=this.cookieService.get("csrftoken")||""),console.log(this.productId),this.httpServise.changeProduct(this.productId,t,this.authToken,this.csrfToken).subscribe(r=>{console.log("Secces:",r)},r=>{console.error("Error:",r)})}deleteProductMetode(t){localStorage.getItem("token")&&(this.authToken=localStorage.getItem("token")||"",this.csrfToken=this.cookieService.get("csrftoken")||""),this.httpServise.deleteProduct(t,this.authToken,this.csrfToken).subscribe(r=>{console.log(t,this.authToken,this.csrfToken),console.log("Secces:",r)},r=>{console.log(t,this.authToken,this.csrfToken),console.error("Error:",r)})}onFileSelected(t){t.target&&t.target.files&&(this.files=t.target.files)}uploadProduct(){let t=new FormData;t.append("id",""),t.append("category",this.productForm.get("category")?.value),t.append("title",this.productForm.get("title")?.value),t.append("description",this.productForm.get("description")?.value),t.append("product_style",this.productForm.get("productStyle")?.value),t.append("barcode",this.productForm.get("barcode")?.value),t.append("price",this.productForm.get("price")?.value),t.append("stock",this.productForm.get("stock")?.value),t.append("size",this.productForm.get("sizes")?.value),t.append("color",this.productForm.get("color")?.value);for(let r=0;r<this.files.length;r++)t.append("images",this.files[r]);this.httpServise.setUpload(t).subscribe(r=>{console.log("Secces:",r)},r=>{console.error("Error:",r)})}getProductMetode(){this.httpServise.getAPIProducts().subscribe(t=>{this.produstTableArray=t,this.productArray=t.map(r=>F(I({},r),{imageIndex:0}))})}getSelectedData(){this.httpServise.getAPIProducts().subscribe(t=>{let r=t,d=new Set;r.forEach(f=>{let x=f.category;x&&d.add(x)}),this.categoryArray=Array.from(d)},t=>{console.error("Error:",t)})}inputNewCategory(){this.categoryBool=!this.categoryBool}};o.\u0275fac=function(r){return new(r||o)(k(ee),k(Z))},o.\u0275cmp=V({type:o,selectors:[["app-upload-product"]],decls:155,vars:9,consts:[[1,"upLoad"],[2,"min-width","380p","margin-top","1rem"],["enctype","multipart/form-data",1,"form-control",3,"formGroup"],[2,"text-align","center"],[1,"form-group"],["type","text","formControlName","title",1,"form-control"],["type","text","formControlName","description",1,"form-control"],["type","text","formControlName","productStyle",1,"form-control"],["type","text","formControlName","barcode",1,"form-control"],["class","form-group",4,"ngIf"],["type","text","formControlName","child_category",1,"form-control"],["type","number","formControlName","price",1,"form-control"],["type","number","formControlName","stock",1,"form-control"],["type","text","formControlName","sizes",1,"form-control"],["type","text","formControlName","color",1,"form-control"],[1,"form-check"],["type","file","formArrayName","image","multiple","",3,"change"],[1,"btn","btn-primary",2,"width","100%",3,"click"],["type","number","formControlName","id",1,"form-control"],[1,"btn","btn-primary",3,"click"],["type","text","formControlName","newtitle",1,"form-control"],["type","text","formControlName","newdescription",1,"form-control"],["type","text","formControlName","newproductStyle",1,"form-control"],["type","text","formControlName","newbarcode",1,"form-control"],["type","text","formControlName","newchild_category",1,"form-control"],["type","number","formControlName","newprice",1,"form-control"],["type","number","formControlName","newstock",1,"form-control"],["type","text","formControlName","newsize",1,"form-control"],["type","text","formControlName","newcolor",1,"form-control"],["style","width: 60px; height: 60px;",3,"src",4,"ngFor","ngForOf"],["type","file","formArrayName","newimage","multiple","",3,"change"],[1,"productTable"],["colspan","12"],[3,"formGroup"],["type","search","formControlName","searchProduct",2,"width","100%",3,"input"],[4,"ngFor","ngForOf"],[1,"category"],[1,"categoryChange"],["formControlName","category",1,"form-check",2,"width","217px"],[1,"btn","btn-primary",2,"margin-left","10px",3,"click"],["type","text","formControlName","category",1,"form-control",2,"width","245px"],[1,"btn","btn-primary",2,"margin-left","5px",3,"click"],["formControlName","newcategory",1,"form-check",2,"width","217px"],["type","text","formControlName","newcategory",1,"form-control",2,"width","245px"],[2,"width","60px","height","60px",3,"src"],[2,"width","90px","height","90px",3,"src"],[1,"btn","btn-danger",3,"click"]],template:function(r,d){r&1&&(i(0,"div",0)(1,"div",1)(2,"form",2)(3,"h5",3),n(4,"Upload New Product"),e(),i(5,"div",4)(6,"label"),n(7,"Title"),e(),a(8,"input",5),e(),i(9,"div",4)(10,"label"),n(11,"Description"),e(),a(12,"input",6),e(),i(13,"div",4)(14,"label"),n(15,"ProductStyle"),e(),a(16,"input",7),e(),i(17,"div",4)(18,"label"),n(19,"Barcode"),e(),a(20,"input",8),e(),w(21,oe,10,1,"div",9)(22,le,9,0,"div",9),i(23,"div",4)(24,"label"),n(25,"Child Category"),e(),a(26,"input",10),e(),i(27,"div",4)(28,"label"),n(29,"Price"),e(),a(30,"input",11),e(),i(31,"div",4)(32,"label"),n(33,"Stock"),e(),a(34,"input",12),e(),i(35,"div",4)(36,"label"),n(37,"Sizes"),e(),a(38,"input",13),e(),i(39,"div",4)(40,"label"),n(41,"Color"),e(),a(42,"input",14),e(),a(43,"br"),i(44,"div",15)(45,"label"),n(46,"Image"),e(),n(47," \xA0 "),i(48,"input",16),g("change",function(x){return d.onFileSelected(x)}),e()(),a(49,"br")(50,"br"),i(51,"button",17),g("click",function(){return d.uploadProduct()}),n(52,"Upload New Product"),e()()(),a(53,"br"),i(54,"div",1)(55,"form",2)(56,"h5",3),n(57,"Change Product"),e(),i(58,"div",4)(59,"label"),n(60,"ID"),e(),a(61,"input",18),i(62,"button",19),g("click",function(){return d.findProduct()}),n(63,"Find Product"),e()(),i(64,"div",4)(65,"label"),n(66,"Title"),e(),a(67,"input",20),e(),i(68,"div",4)(69,"label"),n(70,"Description"),e(),a(71,"input",21),e(),i(72,"div",4)(73,"label"),n(74,"ProductStyle"),e(),a(75,"input",22),e(),i(76,"div",4)(77,"label"),n(78,"Barcode"),e(),a(79,"input",23),e(),w(80,ce,10,1,"div",9)(81,de,9,0,"div",9),i(82,"div",4)(83,"label"),n(84,"Child Category"),e(),a(85,"input",24),e(),i(86,"div",4)(87,"label"),n(88,"Price"),e(),a(89,"input",25),e(),i(90,"div",4)(91,"label"),n(92,"Stock"),e(),a(93,"input",26),e(),i(94,"div",4)(95,"label"),n(96,"Sizes"),e(),a(97,"input",27),e(),i(98,"div",4)(99,"label"),n(100,"Color"),e(),a(101,"input",28),e(),a(102,"br"),i(103,"div",15)(104,"label"),n(105,"Image"),e(),n(106," \xA0 "),i(107,"div"),w(108,me,1,1,"img",29),e(),i(109,"input",30),g("change",function(x){return d.onFileSelected(x)}),e()(),a(110,"br")(111,"br"),i(112,"button",17),g("click",function(){return d.changeProductMetode()}),n(113,"Chage Product"),e()()(),a(114,"br"),e(),a(115,"br")(116,"br")(117,"br")(118,"br")(119,"br"),i(120,"table",31)(121,"thead")(122,"tr")(123,"th"),n(124,"Image"),e(),i(125,"th"),n(126,"Title"),e(),i(127,"th"),n(128,"Description"),e(),i(129,"th"),n(130,"Product Style"),e(),i(131,"th"),n(132,"Barcode"),e(),i(133,"th"),n(134,"Category"),e(),i(135,"th"),n(136,"Color"),e(),i(137,"th"),n(138,"Sizes"),e(),i(139,"th"),n(140,"Child Category"),e(),i(141,"th"),n(142,"Price"),e(),i(143,"th"),n(144,"Quantity"),e(),i(145,"th"),n(146,"Id"),e(),a(147,"th"),e()(),i(148,"tbody")(149,"tr")(150,"th",32)(151,"form",33)(152,"div",4)(153,"input",34),g("input",function(){return d.searchProduct()}),e()()()()(),w(154,pe,28,12,"tr",35),e()()),r&2&&(m(2),s("formGroup",d.productForm),m(19),s("ngIf",d.categoryBool),m(),s("ngIf",!d.categoryBool),m(33),s("formGroup",d.changrProductForm),m(25),s("ngIf",d.categoryBool),m(),s("ngIf",!d.categoryBool),m(27),s("ngForOf",d.imageArray),m(43),s("formGroup",d.productSearchForm),m(3),s("ngForOf",d.produstTableArray))},dependencies:[O,z,$,W,X,G,R,K,q,L,H,J,Q],styles:[".categoryChange[_ngcontent-%COMP%]{display:flex;flex-direction:row}.upLoad[_ngcontent-%COMP%]{margin-left:1rem;display:flex;flex-direction:row;gap:1rem;flex-wrap:wrap}.productTable[_ngcontent-%COMP%]{width:100%;border:1px solid black}.productTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .productTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid black}"]});let l=o;return l})();var ie=(()=>{let o=class o{constructor(){}intercept(t,r){if(typeof localStorage<"u"&&localStorage.getItem("token")){let d=localStorage.getItem("token");t.url.includes("/api")&&(t=t.clone({setHeaders:{Authorization:`Token ${d}`}}))}return r.handle(t)}};o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=_({token:o,factory:o.\u0275fac,providedIn:"root"});let l=o;return l})();var ne=(()=>{let o=class o{constructor(t,r){this.router=t,this.tokenIn=r}canActivate(){return console.log("AuthGuard canActivate() method called"),this.tokenIn.intercept,typeof localStorage<"u"&&(this.token=localStorage.getItem("token")),this.token?(console.log("Authenticated"),!0):(console.log("Not authenticated"),!1)}};o.\u0275fac=function(r){return new(r||o)(E(j),E(ie))},o.\u0275prov=_({token:o,factory:o.\u0275fac,providedIn:"root"});let l=o;return l})();var ue=[{path:"upload",component:te,canActivate:[ne]}],Ie=(()=>{let o=class o{};o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=M({type:o}),o.\u0275inj=U({imports:[D,Y,B.forChild(ue)]});let l=o;return l})();export{ie as a,ne as b,Ie as c};
